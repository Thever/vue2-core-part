# 虚拟节点有哪些属性
```
{
    children:undefined,  //  子元素
    data:{},             //  自带的属性样式
    elm:undefined,       //  上树后的节点
    key:undefined,       //  该节点的唯一标识
    sel:'div',           //  选择器
    text:'虚拟节点'       //  自带的文字
}
```

#snabbdom
简介：一个虚拟 DOM 工具库，本代码使用了其将虚拟DOM转换成真实DOM的方法，借鉴了diff比对思想。

#patch函数执行图
参考根目录下的patch流程图.webp
![patch流程图](.\patch流程图.webp)

#diff算法
1.key用于服务最小化更新
2.只有是同一个虚拟节点才会进行精确化比较，选择器相同而且key相同才是同一个虚拟节点
3.只会进行同层比较，不会进行跨层比较

#经典 diff 算法优化策略
简称
新虚拟列表的前指针(下标) ---- 新前指针
新虚拟列表的后指针(下标) ---- 新后指针
旧虚拟列表的前指针(下标) ---- 旧前指针
旧虚拟列表的后指针(下标) ---- 旧后指针

#四种命中规则
1.新前指针 VS 旧前指针
2.新后指针 VS 旧后指针
3.新后指针 VS 旧前指针 （此种情况命中，涉及移动节点，那么新前指针指向的节点，移动到旧后节点之后）
4.旧后指针 VS 新前指针 （此种情况命中，涉及移动节点，那么新前指针指向的节点，移动到旧前节点之前）

如果都没有命中，就需要用循环来寻找相同的虚拟节点进行比较

#命中规则分解图
参考根目录下的命中规则分解图.webp
![命中规则分解图](.\命中规则分解图.webp)

#手写 diff 算法
```
|-- study_diff
    |-- package.json
    |-- readme.md
    |-- webpack.config.js
    |-- yarn.lock
    |-- page
    |   |-- index.html
    |-- src
        |-- createElement.js // 根据传进来的虚拟节点创建真实的DOM节点
        |-- h.js // 构造虚拟节点
        |-- index.js // 主入口
        |-- patch.js // 对比两个虚拟节点进行打补丁操作
        |-- patchVnode.js // 新旧虚拟节点进行对比
        |-- updateChildren.js // 比对更新虚拟节点里的children
        |-- vnode.js // 虚拟节点类
```